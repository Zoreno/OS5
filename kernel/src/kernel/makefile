# Makefile

#===============================================================================
# Subdirectories to build
#===============================================================================
SUBDIRS=

#===============================================================================
# Objects to build
#===============================================================================
OBJECTS=boot.o kernel_main.o debug_terminal.o kernel_panic.o exception.o exception_handlers.o

#===============================================================================
# Phony declarations
#===============================================================================
.phony: subdirs $(SUBDIRS)

#===============================================================================
# Default target
#===============================================================================
all: subdirs $(OBJECTS)

#===============================================================================
# C code template target
#===============================================================================
%.o: %.c
	$(KERNEL_CC) $(KERNEL_CC_FLAGS) -c $< -o $(KERNEL_BUILD_DIR)/$@

#===============================================================================
# Assembly code template target
#===============================================================================
%.o: %.s
	$(KERNEL_AC) $(KERNEL_AC_FLAGS) $< -o $(KERNEL_BUILD_DIR)/$@

#===============================================================================
# Target to build all subdirectories
#===============================================================================
subdirs: $(SUBDIRS)

#===============================================================================
# Target to build a specific subdirectory
#===============================================================================
$(SUBDIRS):
	$(MAKE) -C $@

